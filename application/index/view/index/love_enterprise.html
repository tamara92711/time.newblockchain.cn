{extend name="/common/templates/tpl-wo-sb1"}

{block name="page-title"}爱心企业{/block}
{block name="main"}
<div style="width:1118px;">
    <span class="topic-1"> 爱心企业</span>
    <div class="topic-2">
        <p class="t-news-center pl37">Love enterprise</p>
    </div>
    <div class="loves-container">
        <div class="data-container"></div>
        <div style="clear: both"></div>
    </div>
    <div id="pagination" class="fr mt-145"></div>
</div>
{/block}
{block name="custom-css"}
<link href="/assets/css/pagination/pagination.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/index/index/love_enterprise.css" rel="stylesheet" type="text/css" />
{/block}
{block name="custom-js"}
<script src="/assets/js/pagination/pagination.js" type="text/javascript"></script>
<script src="/assets/jsondata/love_json.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        var container = $('#pagination');
        var datas = JSON.parse(data);
        alert(datas.length);

        var tempData=[];
        for(var i=0;i<datas.items.length;i+=2)
        {
            var exItem=[];
            exItem[0] = datas.items[i];
            if (i != datas.items.length - 1)
                exItem[1] = datas.items[i + 1];
            else
                exItem[1] = null;

            tempData[i / 2] = exItem;

        }

        $.extend($.fn.pagination.defaults, {
            pageSize: 5
        })
        var options = {
            dataSource: tempData,
            callback: function (response, pagination) {

                var dataHtml = '';
                $.each(response, function (index, item) {

                    dataHtml += '<div class="boxs">';
                    dataHtml += '<div class="list-item left">';
                    dataHtml += ' <img src="'+item[0].img_src+'">';
                    dataHtml += ' <div class="description">';
                    dataHtml += ' <p>'+item[0].com_name+'</p>';
                    dataHtml += ' <p>'+item[0].com_description+'</p>';
                    dataHtml += '</div>';
                    dataHtml += '</div>';
                    if(item[1] != null)
                        dataHtml += '<div class="list-item left pl20" style="border-right: none;">';
                    dataHtml += '<img src="'+item[1].img_src+'">';
                    dataHtml += '  <div class="description" style="padding-right: 0px;">';
                    dataHtml += ' <p>'+item[1].com_name+'</p>';
                    dataHtml += ' <p>'+item[1].com_description+'</p>';
                    dataHtml += '</div>';
                    dataHtml += '</div>';
                    dataHtml += '</div>';
                });
                container.prev().html(dataHtml);
            }
        };
        container.pagination(options);
    });
</script>
{/block}



