{extend name="common/templates/tpl-blank"} {block name="page-title"}友情链接{/block} {block name="custom-css"}
<link href="/assets/metronic/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
<link href="/assets/metronic/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css"
/>
<link href="/assets/metronic/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"
/>
<link href="/assets/metronic/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css"
/> {/block} {block name="custom-js"}
<script src="/assets/metronic/global/scripts/datatable.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
<script>
    function update_item(id) {
        $.ajax({
            url: '/admin/links/' + id,
            type: 'PUT',
            success: function (result) {
                // Do something with the result
            }
        });
    }

    function delete_item(id) {
        $.ajax({
            url: '/admin/links/' + id,
            type: 'DELETE',
            success: function (result) {
                // Do something with the result
            }
        });
    }

    $(document).ready(function () {
        $('#tbl_links').DataTable({
            "ajax": {
                "url": "/admin/links/getLinksList",
                "type": "GET",
                "datatype": "json",
                "dataSrc": function (response) {
                    json = JSON.parse(response);
                    return json.data;
                }
            },
            "columns": [
                { "data": "order_by" },
                { "data": "name" },
                { "data": "url" },
                { "data": "new_window" },
                {
                    "data": "id",
                    "render": function (id) {
                        return "<a class='btn btn-primary' href='/admin/links/" + id + "/edit'><i class='fa fa-pencil'></i>编辑</a><button class='btn btn-danger' onclick='delete_item(" + id + ")'><i class='fa fa-trash'></i>删除</a>";
                    }
                }
            ],
            "language": {
                "emptyTable": "没有资料。请click<b>添加</b>。"
            }
        });
    });
</script> {/block} {block name="breadcrumb"}
<ul class="page-breadcrumb">
    <li>
        <span>友情链接</span>
    </li>
</ul>
{/block} {block name="page-content-title"}
<h1 class="page-title">友情链接
</h1>
{/block} {block name="page-content"}
<a class="btn btn-default" data-toggle="modal" data-target="#addOrEdit">
    <i class="fa fa-plus"></i> 添加</a>
<table id="tbl_links" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>排序</th>
            <th>链接名称</th>
            <th>链接地址</th>
            <th>新窗口打开</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>

<div class="modal fade bs-modal-lg" tabindex="-1" role="dialog" id="addOrEdit">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">添加链接</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form" action="/admin/links/save" enctype="multipart/form-data" method="post">
                    <div class="form-body">
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_name">链接名称：</label>
                            </div>
                            <div class="col-md-7">
                                <input type="text" class="form-control" id="link_name" name="link_name" />
                            </div>
                            <div class="col-md-3">
                                <span>请填写友情链接的名称</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_name">是否显示：</label>
                            </div>
                            <div class="col-md-7">
                                <div class="bootstrap-switch-container">
                                    <span class="bootstrap-switch-handle-on bootstrap-switch-primary" style="width: 31px;"></span>
                                    <span class="bootstrap-switch-label" style="width: 31px;">&nbsp;</span>
                                    <span class="bootstrap-switch-handle-off bootstrap-switch-default" style="width: 31px;"></span>
                                    <input type="checkbox" name="is_show" class="make-switch" id="is_show" data-size="mini" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <span>是否在前台显示</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_name">是否新窗口打开：</label>
                            </div>
                            <div class="col-md-7">
                                <div class="bootstrap-switch-container">
                                    <span class="bootstrap-switch-handle-on bootstrap-switch-primary" style="width: 31px;"></span>
                                    <span class="bootstrap-switch-label" style="width: 31px;">&nbsp;</span>
                                    <span class="bootstrap-switch-handle-off bootstrap-switch-default" style="width: 31px;"></span>
                                    <input type="checkbox" name="new_window" class="make-switch" id="new_window" data-size="mini" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <span>点击链接是否在新窗口打开</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_logo">链接LOGO：</label>
                            </div>
                            <div class="col-md-7">
                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                    <div class="input-group input-large">
                                        <div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput">
                                            <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                            <span class="fileinput-filename"> </span>
                                        </div>
                                        <span class="input-group-addon btn default btn-file">
                                            <span class="fileinput-new"> 上专图片 </span>
                                            <span class="fileinput-exists"> 改变 </span>
                                            <input type="file" name="logo_image" />
                                        </span>
                                        <a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput"> Remove </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <span>选择友情链接的LOGO
                                </span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_address">链接地址：</label>
                            </div>
                            <div class="col-md-7">
                                <input type="text" class="form-control" name="link_url" id="link_address" />
                            </div>
                            <div class="col-md-3">
                                <span>友情链接跳转地址</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-2">
                                <label for="link_order">排序：</label>
                            </div>
                            <div class="col-md-7">
                                <input type="text" class="form-control" name="link_order" id="link_order" />
                            </div>
                            <div class="col-md-3">
                                <span>请填写自然数，友情链接会根据排序进行由小到大排列显示</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions right">
                        <button type="submit" class="btn blue">保存</button>
                        <button type="button" class="btn default" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{/block}